{{ $data := .Data }} {{ $h := .Helpers }}

<div class="container">
  <div class="card mx-auto">
    <div class="card-header">Bandwidth Settings</div>

    <div class="card-body">
      <!-- Tab Start -->
      <div>
        <ul class="nav nav-tabs" id="bandwidthTabs" role="tablist">
          {{ range $i, $ifname := $data.ifnames }}
          <li class="nav-item" role="presentation">
            <button class="nav-link {{ if eq $i 0 }} active {{ end }}" data-bs-toggle="tab"
              data-bs-target="#tab-pane-{{ $ifname }}" type="button" role="tab" aria-controls="bandwidth-tab-pane"
              aria-selected="true">
              {{ $ifname }}
            </button>
          </li>
          {{ end }}
        </ul>
        <!-- Tab End -->

        <!-- Tab Content Start -->
        <div class="tab-content col-lg-6 mx-auto" id="networkTabContent">
          {{ range $i, $ifname := $data.ifnames }} {{ $cfg := (call
          $data.configFor $ifname)}}
          <div class="tab-pane fade {{ if eq $i 0 }} show active {{ end }}" id="tab-pane-{{ $ifname }}" role="tabpanel"
            aria-labelledby="bandwidth-tab" tabindex="0">
            <div class="mt-3">
              <h3>{{ $ifname | uppercase }} Bandwidth</h3>
            </div>

            <div class="container">
              <form action="{{ call $data.saveUrlFor $ifname }}" method="POST">
                <div class="mt-3">
                  <label class="form-label" for="">Global Download (mbits):</label>
                  <input class="form-control mt" type="number" name="global_down_mbits"
                    value="{{ $cfg.GlobalDownMbits }}" />
                </div>

                <div class="mt-3">
                  <label class="form-label" for="">Global Upload (mbits):</label>
                  <input class="form-control mt" type="number" name="global_up_mbits"
                    value="{{ $cfg.GlobalUpMbits }}" />
                </div>

                <div class="form-check mt-3">
                  <input class="form-check-input" type="checkbox" name="use_global" value="1" {{ if $cfg.UseGlobal }}
                    checked {{ end }} />
                  <label class="form-check-label"> Use Global Bandwidth </label>
                </div>

                <div class="mt-3">
                  <label class="form-label" for="">Per User Download (mbits):</label>
                  <input class="form-control" type="number" name="user_down_mbits" value="{{ $cfg.UserDownMbits }}" />
                </div>

                <div class="mt-3">
                  <label class="form-label" for="">Per User Upload (mbits):</label>
                  <input class="form-control" type="number" name="user_up_mbits" value="{{ $cfg.UserUpMbits }}" />
                </div>

                <div class="form-check mt-3">
                  <input class="form-check-input" type="checkbox" name="update_existing_users" value="1" />
                  <label class="form-check-label">Update Existing Users</label>
                </div>

                <div class="text-end my-3">
                  <button class="btn btn-primary" type="submit">Save</button>
                </div>
              </form>
            </div>
          </div>
          {{ end }}
        </div>
      </div>

      <!-- Tab Content End -->
    </div>
  </div>
</div>
